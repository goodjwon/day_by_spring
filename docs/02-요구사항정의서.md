# 도서 주문 및 대여 시스템 요구사항 정의서

## 1. 개요

### 1.1 프로젝트 목적
- Spring Boot 학습을 위한 실습 프로젝트
- 도서관과 서점 기능을 통합한 도서 관리 시스템 구축
- 다양한 디자인 패턴 및 Spring 기능 학습

### 1.2 프로젝트 범위
- 도서 주문 및 결제 시스템
- 도서 대여 및 반납 시스템
- 회원 관리 시스템
- 관리자 기능

## 2. 기능 요구사항

### 2.1 회원 관리 (Member Management)

#### 2.1.1 회원 가입
- **REQ-001**: 시스템은 이름, 이메일을 입력받아 회원가입을 처리해야 한다
- **REQ-002**: 이메일 중복 검증을 수행해야 한다
- **REQ-003**: 신규 회원은 기본적으로 REGULAR 멤버십으로 가입된다
- **REQ-004**: 회원가입 완료 시 환영 이메일을 발송해야 한다

#### 2.1.2 회원 조회 및 관리
- **REQ-005**: 회원 정보를 조회할 수 있어야 한다
- **REQ-006**: 회원 목록을 페이징하여 조회할 수 있어야 한다
- **REQ-007**: 이름으로 회원을 검색할 수 있어야 한다
- **REQ-008**: 멤버십 타입별 회원을 조회할 수 있어야 한다

#### 2.1.3 멤버십 관리
- **REQ-009**: 멤버십 타입은 REGULAR, PREMIUM, SUSPENDED로 구분된다
- **REQ-010**: REGULAR 회원은 최대 5권까지 대여 가능하다
- **REQ-011**: PREMIUM 회원은 최대 10권까지 대여 가능하다
- **REQ-012**: SUSPENDED 회원은 대여가 불가능하다

### 2.2 도서 관리 (Book Management)

#### 2.2.1 도서 등록 및 수정
- **REQ-013**: 도서 정보(제목, 저자, 가격, ISBN)를 등록할 수 있어야 한다
- **REQ-014**: 등록된 도서 정보를 수정할 수 있어야 한다
- **REQ-015**: 도서의 대여 가능 여부를 관리할 수 있어야 한다

#### 2.2.2 도서 조회
- **REQ-016**: 전체 도서 목록을 조회할 수 있어야 한다
- **REQ-017**: 도서 상세 정보를 조회할 수 있어야 한다
- **REQ-018**: 제목이나 저자로 도서를 검색할 수 있어야 한다

### 2.3 주문 관리 (Order Management)

#### 2.3.1 주문 생성
- **REQ-019**: 회원은 여러 도서를 선택하여 주문할 수 있어야 한다
- **REQ-020**: 주문 시 총 금액이 자동 계산되어야 한다
- **REQ-021**: 주문 생성 시 상태는 PENDING으로 설정된다
- **REQ-022**: 주문 완료 시 확인 이메일을 발송해야 한다

#### 2.3.2 주문 처리
- **REQ-023**: 주문 상태는 PENDING, CONFIRMED, SHIPPED, DELIVERED, CANCELLED로 관리된다
- **REQ-024**: 관리자는 주문 상태를 변경할 수 있어야 한다
- **REQ-025**: 주문 내역을 조회할 수 있어야 한다

#### 2.3.3 결제 처리
- **REQ-026**: 신용카드 결제를 지원해야 한다
- **REQ-027**: 계좌이체 결제를 지원해야 한다
- **REQ-028**: 결제 방식은 Strategy 패턴으로 구현되어야 한다
- **REQ-029**: 결제 실패 시 주문을 CANCELLED 상태로 변경해야 한다

### 2.4 대여 관리 (Loan Management)

#### 2.4.1 도서 대여
- **REQ-030**: 회원은 대여 가능한 도서를 대여할 수 있어야 한다
- **REQ-031**: 대여 시 반납 예정일은 2주 후로 설정된다
- **REQ-032**: 회원의 대여 권수 제한을 확인해야 한다
- **REQ-033**: 이미 대여 중인 도서는 대여할 수 없어야 한다

#### 2.4.2 도서 반납
- **REQ-034**: 회원은 대여 중인 도서를 반납할 수 있어야 한다
- **REQ-035**: 반납 시 반납일이 기록되어야 한다
- **REQ-036**: 반납된 도서는 다시 대여 가능 상태가 되어야 한다

#### 2.4.3 연체 관리
- **REQ-037**: 반납 예정일을 초과한 대여를 연체로 분류한다
- **REQ-038**: 연체 회원에게 알림 이메일을 발송해야 한다
- **REQ-039**: 연체가 심각한 경우 계정을 일시 정지할 수 있어야 한다

### 2.5 통계 및 리포트 (Statistics & Reports)

#### 2.5.1 대여 통계
- **REQ-040**: 기간별 대여 현황을 조회할 수 있어야 한다
- **REQ-041**: 회원별 대여 이력을 조회할 수 있어야 한다
- **REQ-042**: 도서별 대여 횟수를 조회할 수 있어야 한다

#### 2.5.2 주문 통계
- **REQ-043**: 주문 현황을 조회할 수 있어야 한다
- **REQ-044**: 매출 통계를 조회할 수 있어야 한다

## 3. 비기능 요구사항

### 3.1 성능 요구사항
- **NFR-001**: 도서 목록 조회는 3초 이내에 응답해야 한다
- **NFR-002**: 동시 사용자 100명을 지원해야 한다
- **NFR-003**: 데이터베이스 조회 시 인덱스를 활용해야 한다

### 3.2 보안 요구사항
- **NFR-004**: 회원 정보는 암호화하여 저장해야 한다
- **NFR-005**: API 접근 시 인증/인가를 확인해야 한다
- **NFR-006**: SQL Injection 등 보안 취약점을 방어해야 한다

### 3.3 가용성 요구사항
- **NFR-007**: 시스템 가동률은 99% 이상이어야 한다
- **NFR-008**: 장애 발생 시 적절한 오류 메시지를 제공해야 한다
- **NFR-009**: 데이터 백업 및 복구 방안을 제공해야 한다

### 3.4 확장성 요구사항
- **NFR-010**: 새로운 결제 방식 추가가 용이해야 한다
- **NFR-011**: 새로운 알림 채널 추가가 용이해야 한다
- **NFR-012**: 멤버십 타입 추가가 용이해야 한다

## 4. 기술 요구사항

### 4.1 개발 환경
- **TECH-001**: Java 21을 사용해야 한다
- **TECH-002**: Spring Boot 3.5.3을 사용해야 한다
- **TECH-003**: Maven을 빌드 도구로 사용해야 한다

### 4.2 데이터베이스
- **TECH-004**: 개발 환경에서는 H2 데이터베이스를 사용한다
- **TECH-005**: 운영 환경에서는 MySQL을 사용한다
- **TECH-006**: Spring Data JPA를 사용하여 데이터 접근을 처리한다

### 4.3 디자인 패턴
- **TECH-007**: IoC/DI 패턴을 적용해야 한다
- **TECH-008**: Repository 패턴을 적용해야 한다
- **TECH-009**: Strategy 패턴을 결제 시스템에 적용해야 한다

### 4.4 테스트
- **TECH-010**: 단위 테스트 커버리지는 80% 이상이어야 한다
- **TECH-011**: 통합 테스트를 작성해야 한다
- **TECH-012**: @DataJpaTest를 활용한 Repository 테스트를 작성해야 한다

## 5. 제약사항

### 5.1 개발 제약사항
- **CONST-001**: 외부 라이브러리 사용은 최소화해야 한다
- **CONST-002**: Spring Boot의 기본 설정을 최대한 활용해야 한다
- **CONST-003**: 코드는 한글 주석을 포함해야 한다 (학습 목적)

### 5.2 운영 제약사항
- **CONST-004**: 개발 서버에서만 H2 Console을 사용할 수 있다
- **CONST-005**: 로그 레벨은 환경별로 다르게 설정되어야 한다
- **CONST-006**: 민감한 정보는 환경변수로 관리해야 한다

## 6. 인터페이스 요구사항

### 6.1 사용자 인터페이스
- **UI-001**: RESTful API를 제공해야 한다
- **UI-002**: JSON 형태로 데이터를 주고받아야 한다
- **UI-003**: HTTP 상태 코드를 적절히 활용해야 한다

### 6.2 외부 시스템 인터페이스
- **EXT-001**: 이메일 발송을 위한 SMTP 연동을 지원해야 한다
- **EXT-002**: 결제 시스템과의 연동 인터페이스를 제공해야 한다 (Mock)

## 7. 데이터 요구사항

### 7.1 데이터 모델
- **DATA-001**: Member, Book, Order, OrderItem, Loan 엔티티가 필요하다
- **DATA-002**: 각 엔티티 간의 관계는 JPA 어노테이션으로 정의되어야 한다
- **DATA-003**: 열거형(Enum)을 활용하여 상태 값을 관리해야 한다

### 7.2 데이터 무결성
- **DATA-004**: 외래키 제약조건을 설정해야 한다
- **DATA-005**: 필수 필드에 대한 NOT NULL 제약조건을 설정해야 한다
- **DATA-006**: 이메일은 UNIQUE 제약조건을 가져야 한다

## 8. 품질 요구사항

### 8.1 코드 품질
- **QUAL-001**: SonarQube 기준을 준수해야 한다
- **QUAL-002**: 코드 중복도는 5% 이하여야 한다
- **QUAL-003**: 순환 복잡도는 10 이하여야 한다

### 8.2 문서화
- **QUAL-004**: API 문서를 작성해야 한다
- **QUAL-005**: 데이터베이스 스키마 문서를 작성해야 한다
- **QUAL-006**: 설치 및 실행 가이드를 작성해야 한다